# Project TODO

## Phase 1: プロジェクト初期化
- [x] プロジェクトの初期化
- [x] 音声ファイルの確認
- [x] design.mdの作成

## Phase 2: コア機能実装
- [x] 音声ファイルをプロジェクトに配置
- [x] オーディオ再生機能の実装
- [x] ノーツレーンとタップエリアのUI実装
- [x] ノーツ生成ロジックの実装
- [x] タップ判定システムの実装
- [x] スコアリングシステムの実装
- [x] コンボシステムの実装

## Phase 3: 難易度レベルとノーツデータ
- [x] Easy難易度のノーツデータ作成
- [x] Normal難易度のノーツデータ作成
- [x] Hard難易度のノーツデータ作成
- [x] 難易度選択画面の実装

## Phase 4: UI/UX改善
- [x] ホーム画面の実装
- [x] リザルト画面の実装
- [x] ハイスコア保存機能（AsyncStorage）
- [x] 和風テーマのカラーパレット適用
- [x] タップ時のハプティクスフィードバック
- [x] ビジュアルエフェクト（判定表示、コンボ表示）

## Phase 5: テストとデバッグ
- [x] タップ判定精度のテスト
- [x] スコア計算のテスト
- [x] 音声同期のテスト
- [x] 各難易度のバランス調整

## Phase 6: 最終調整
- [x] アプリロゴの生成と設定
- [x] アプリ名の設定
- [x] 最終チェックポイントの作成

## Phase 7: ロゴとGoogle AdSense広告の追加
- [x] 新しいロゴ画像をアプリアイコンとして設定
- [x] ロゴURLをapp.config.tsに更新
- [x] Google AdSense広告コンポーネントの作成
- [x] リザルト画面に広告を配置
- [x] ホーム画面に広告を配置（オプション）
- [x] 広告の動作確認
- [x] 最終チェックポイントの作成

## Phase 8: 実際の音楽ファイルの追加
- [x] 元のWAVファイルをMP3に変換（192kbps、ファイルサイズ削減）
- [x] MP3ファイルをプロジェクトに配置
- [ ] 音声再生の動作確認
- [ ] 最終チェックポイントの作成

## Phase 9: スコア判定とAdSense表示の問題修正
- [x] スコア判定システムのデバッグ（Perfect/Good/Missが0のまま）
- [x] タップイベントハンドラーの確認
- [x] ゲームロジックの修正
- [x] リザルト画面の色修正（白背景に白文字問題）
- [ ] AdSense広告が表示されない問題の調査
- [ ] AdSenseスクリプトの読み込み確認
- [ ] 広告表示の修正
- [ ] 動作確認とテスト
- [ ] 最終チェックポイントの作成

## Phase 10: BPM分析とリズム修正
- [x] 音声ファイルのBPM分析（BPM 164）
- [x] BPMに合わせたノーツデータの再生成
- [x] 各難易度のノーツ配置調整
- [x] リズム同期のテスト

## Phase 11: UI最終調整
- [x] ホーム画面にロゴ画像を追加
- [x] ホーム画面のハイスコア色修正
- [x] リザルト画面の色修正
- [x] 難易度選択画面の色修正
- [ ] 最終チェックポイントの作成

## Phase 12: ユーザー名入力・保存機能
- [x] ユーザー名入力画面の作成
- [x] AsyncStorageでユーザー名を保存
- [x] 初回起動時にユーザー名入力を促す
- [x] ユーザー名変更機能（設定画面）

## Phase 13: 全国ランキング機能
- [x] データベーススキーマの設計（scores テーブル）
- [x] APIエンドポイントの実装（スコア送信、ランキング取得）
- [x] ランキング画面の作成
- [x] スコア送信機能の実装（リザルト画面から）
- [x] ランキング表示機能（トップ100）
- [x] 難易度別ランキング表示

## Phase 14: UI/UX改善（ランキング関連）
- [x] ホーム画面にランキングボタンを追加
- [x] リザルト画面にスコア送信確認ダイアログを追加
- [x] ランキング画面のデザイン（順位、ユーザー名、スコア、日付）

## Phase 15: テストとチェックポイント
- [x] ユーザー名入力のバリデーション
- [x] スコア送信のエラーハンドリング
- [x] ランキング取得のエラーハンドリング
- [x] オフライン時の動作確認
- [x] 最終チェックポイントの作成

## Phase 16: AdSense配置の最適化
- [x] ホーム画面の広告を下部に移動（スクロール領域内）
- [x] リザルト画面の広告を下部に移動（スコア表示の邪魔にならない位置）
- [x] ランキング画面の広告配置（リスト下部）
- [x] ゲーム画面には広告を表示しない（ゲームプレイの邪魔にならないように）

## Phase 17: 2曲目の追加
- [x] 音楽ファイル（WAV）をプロジェクトに配置
- [x] カバー画像をプロジェクトに配置
- [x] 2曲目の曲データを作成（BPM 76）
- [x] 1曲目のタイトルを更新（「ズイズイソング 和風ロック」）
- [x] 曲選択画面のUI実装（横スクロール）
- [x] ナビゲーションを更新（ホーム → 曲選択 → 難易度選択 → ゲーム）
- [x] 曲選択画面のデザイン（カバー画像、タイトル、BPM表示）
- [x] テストとチェックポイント作成

## Phase 18: バグ修正
- [x] ノーツがチカチカする問題を修正（レンダリング最適化）
- [x] 1曲目の画像が中央揃えになっていない問題を修正
- [x] テストとチェックポイント作成

## Phase 19: 3曲目の追加
- [x] 3曲目「モエチャッカファイア (Cover) Metal x EDM」を追加（BPM 81.6）
- [x] 3曲目のカバー画像を生成
- [x] 3曲目の音楽ファイルをプロジェクトに追加
- [x] 曲選択画面に3曲目を表示
- [x] テストとチェックポイント作成

## Phase 20: スマホでのゲームプレイ問題修正
- [x] ノーツのチカチカ（点滅）を修正
- [x] タップ判定前にノーツが消える問題を修正
- [x] タップが効かない問題を修正
- [x] 判定を4段階（Perfect / Good / Normal / Miss）に変更
- [x] 判定範囲を緩くする
- [x] ゲーム中に「戻る」を押しても曲が再生され続ける問題を修正
- [x] テストとチェックポイント作成

## Phase 21: タップが全てMissになる問題修正
- [x] タップ判定ロジックのバグを特定
- [x] タップ判定を修正
- [x] テストとチェックポイント作成

## Phase 22: タップエフェクトの追加とタップ機能修正
- [x] タップ時にレーンにエフェクトを追加
- [x] タップ判定ロジックを再検討
- [x] テストとチェックポイント作成
- [x] ブラウザを閉じても音楽が再生され続ける問題を修正

## Phase 23: 判定エリアのタップ対応とPerfectエフェクト
- [x] 判定エリア（〇）をタップ可能にする
- [x] Perfect時に特別なエフェクトを追加
- [x] テストとチェックポイント作成
- [x] リザルト画面の「MENU」ボタンの下にAdSenseを追加（既に実装済み）

## Phase 24: 判定エリアのデザイン修正
- [x] 判定エリアのデザインを元に戻す
- [x] テストとチェックポイント作成

## Phase 25: Perfect時の爆発エフェクト
- [x] 爆発エフェクト画像をプロジェクトに追加
- [x] Perfectエフェクトを爆発画像に変更
- [x] テストとチェックポイント作成

## Phase 26: 曲終了後のノーツ問題とPerfectエフェクト修正
- [x] 曲が終わってもノーツが落ち続ける問題を修正
- [x] Perfectエフェクトをタップしたノーツの位置で爆裂するように変更
- [x] テストとチェックポイント作成
